# Antigravityと作る、ミニマルで理解しやすいdotfiles

## はじめに

自分の開発環境を整理し、dotfilesとして管理することにしました。
以前から興味はあったものの、なかなか手を付けられずにいました。

作成にあたっては、以下の記事を大変参考にさせていただきました。
[ようこそdotfilesの世界へ #Vim - Qiita](https://qiita.com/yutkat/items/c6c7584d9795799ee164)

この記事のおかげで、dotfilesの基本概念からディレクトリ構成までスムーズに理解することができました。この場を借りて感謝申し上げます。

本記事では、上記の記事を参考にしつつ、**「自分にとって必要なものだけを入れるミニマルな構成」** にこだわって構築した私のdotfilesと、その構築プロセスにおける**AIエージェント「Antigravity」の活用法**について紹介します。

## こだわりのミニマル構成

どのような構成が良いかは人それぞれですが、私にとっては「管理しやすく、理解できている状態」が理想です。
そのため、今回は以下のツールに絞ったミニマルな構成にしました。

- **Install.sh**: シンプルなセットアップスクリプト
- **zsh**: シェル
- **Starship**: プロンプトのカスタマイズ
- **Sheldon**: zshプラグインマネージャー
- **WezTerm**: ターミナルエミュレーター
- **Neovim**: エディタ

### 1. 脱Oh My Zsh、Sheldonの採用

zshの構成において、最も有名なフレームワークは `Oh My Zsh` ですが、多機能すぎて動作が重くなることや、ブラックボックス化しやすい点が気になっていました。

そこで今回は、Rust製の高速なプラグインマネージャーである **Sheldon** を採用しました。
Sheldonは設定ファイル（TOML）にプラグインを記述するだけで、宣言的に管理できるのが大きな魅力です。起動速度も速く、何を入れているかが明確になるため、ミニマル構成を目指す上で最適な選択でした。

### 2. 設定はLuaで統一 (WezTerm & Neovim)

ターミナルには **WezTerm**、エディタには **Neovim** を選択しました。
この組み合わせの最大のメリットは、**設定を全て Lua 言語で統一できること**です。

以前はVim scriptなどが混在していましたが、Luaに統一することで構文を覚えるコストが減り、設定ファイルの可読性も劇的に向上しました。
WezTermもNeovimも、Luaによるプログラマブルな設定が可能なので、「こういう挙動にしたい」と思ったときに柔軟に対応できます。

## AIとのペアプログラミング

今回の構築では、AIアシスタントを活用して苦手な作業を効率化しました。

### 「英語を読むのが辛い、でも翻訳は嫌だ」というわがまま

私は学生時代にTOEIC 700点台を取ったものの、正直なところ技術ドキュメントの英語を読むのは負担に感じます。
かといって、ブラウザの翻訳機能でページ丸ごと翻訳してしまうと、技術用語まで変に翻訳されたり、原文のニュアンス（言い回しなど）が失われたりするのが好きではありません。

「**英語のニュアンスはある程度掴みたいけど、全部自力で読むのはしんどい**」

そんなわがままを叶えるため、AIを使って解決策を実装しました。

### 日本語ガイド生成ワークフローの作成

AIにお願いして、**「GitHubのリポジトリURLを渡すと、要点をまとめた日本語のガイド（Markdown）を生成してくれるワークフロー」** を作成しました。

具体的には `.agent/workflows/readme-summary-jp.md` というワークフロー定義を作成しました。
内容は以下のようになっています。これをAntigravityに実行させることで、一貫したフォーマットのドキュメントが生成されます。

```markdown:.agent/workflows/readme-summary-jp.md
---
description: zsh/Neovimプラグイン日本語セットアップガイド生成
---

# ワークフロー：zsh/Neovimプラグイン日本語セットアップガイド生成

このワークフローは、GitHub上のプラグインリポジトリを解析し、ユーザーの環境に最適化されたインストール手順と設定例を日本語のファイルとして書き出します。

## 実行手順

1. **リポジトリの解析と変数抽出**
   - ユーザーから提供されたURLから「リポジトリ名（例: `telescope.nvim`）」を特定し、変数 `{repo_name}` とする。
   - `README.md` や `doc/*.txt` を読み込み、プラグインの目的、依存関係（Lua、外部バイナリ、Nerd Fonts等）を特定する。

2. **設定コードの生成**
   - **Neovimプラグインの場合**: `lazy.nvim` 形式のLua設定コードを生成する。
   - **zshプラグインの場合**: `zinit` または `oh-my-zsh` 形式の読み込みコードを生成する。
   - キーバインド設定や、推奨されるオプション設定も抽出する。

3. **日本語ドキュメントのファイル作成**
   - 現在の作業ディレクトリに `docs/{repo_name}_guide.md` という名前でファイルを新規作成（または上書き）し、以下の内容を日本語で記述する。
     - **概要**: このプラグインが解決する課題。
     - **前提条件**: Neovimのバージョンや、別途インストールが必要なツール（`ripgrep`や`fzf`など）。
     - **設定例**: そのまま設定ファイルに貼り付けられるコードブロック。
     - **基本操作**: 主要なキーバインドやコマンドの対照表。

4. **完了報告**
   - ファイルを作成した場所と、注意すべき依存関係（特に外部ツール）をチャットで要約して報告する。

## 出力ルール
- ファイル名は必ず `{repo_name}_guide.md` とする。
- 技術解説は、Neovim/zshに慣れたエンジニア向けに簡潔に行う。
```

原文の良さを残しつつ、必要な情報の要点だけを日本語で把握できる。
まさに「**いいとこ取り**」の環境ができあがりました。

## まとめ

既存の素晴らしい知見（Qiita記事）をベースに、自分のこだわり（ミニマル・Sheldon・Lua）を詰め込み、さらにAIの力で苦手な部分（英語読解）を克服する。
自分にとって最高の開発環境構築体験となりました。

これからdotfilesを整理しようと思っている方、ぜひ「自分にとってのミニマル」と「AIとの協業」を試してみてください。
